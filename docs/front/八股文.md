---
title: 八股文
---

### 浏览器从输入到渲染的原理

1. UI 线程判断是搜索查询还是 URL。
2. 网络线程进行 DNS 解析，为请求建立 TLS 连接。
3. 网络线程读取请求，识别数据类型以及 MIME 类型校验。（其中识别状态码，若是 301 还需要重新发起一个 url 请求）
4. 根据类型进行处理以及 CORS 检查。（html 传给 GPU，zip 传给下载管理器）
5. 网络线程告诉 ui 线程数据准备就绪，ui 线程找到一个渲染器进行网页的渲染。

### CORS 检查

认证过程：

- 网站 A 对浏览器说：你去帮我找服务端 B 要个苹果。
- 浏览器对服务端 B 说: 我要个苹果。
- 服务端 B 对浏览器说: 呐，这是给你的苹果，另外给你个名单，只许这些人吃。
- 浏览器拿到苹果，对比了一下名单，发现 A 在名单里，便把苹果给 A 吃了。

##### 控制 CORS 检查的头字段：

请求头：

- Origin：表明预检请求或实际请求的源站 URL，不管是否跨域 ORIGIN 字段总被发送。
- Access-Control-Request-Method：将实际请求的 HTTP 方法告诉服务器。
- Access-Control-Request-Headers：将实际请求所携带的首部字段告诉服务器（请求头 header 中的字段）

响应头：

- Access-Control-Allow-Origin：指定允许访问该资源的 URL，对于携带身份凭证的请求不可使用通配符\*
- Access-Control-Expose-Headers：指定 XMLHttpRequest 的 getResponseHeader 可以访问的响应头。
- Access-Control-Max-Age：指定 preflight 请求的结果能狗被缓存多久。
- Access-Control-Allow-Credentials：是否允许浏览器读取 response 的内容。
- Access-Control-Allow-Methods：指明实际请求所允许使用的 HTTP 方法。
- Access-Control-Allow-Headers：指明实际请求所允许携带的首部字段。
